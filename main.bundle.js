(self.webpackChunkminskin=self.webpackChunkminskin||[]).push([[179],{28:(e,t,n)=>{"use strict";var i=n(212),o=n(47),a=n(886);const r={allowLightHellpers:!1,testSkin:!1,testSkinURL:"./test.png",joinLimit:.8,FOV:60,backgroundColor:15921906,dirLightColor:16777215,hemLighColor:3381708,groundColor:15067887,ambientLightStrength:2.5,dirLightStrength:.5,hemLightStrength:.01,spotLightStrength:1};var d=document.querySelector("canvas"),h=document.querySelector("div.spinner"),s=new i.xsS;s.background=new i.Ilk(r.backgroundColor||15921906),s.fog=new i.ybr(r.backgroundColor||15921906,1,40);var l=new i.cPb(r.FOV||60,window.innerWidth/window.innerHeight,.1,1e3);l.position.z=15,l.lookAt(0,0,0);var c=new i.CP7({canvas:d,antialias:!0});c.setPixelRatio(window.devicePixelRatio),c.shadowMap.enabled=!0,c.setSize(window.innerWidth,window.innerHeight,!1);var w=new a.z(l,d),g=new i.Mig(4210752,r.ambientLightStrength||2.5);s.add(g);var u=new i.Ox3(r.dirLightColor||16777215,r.dirLightStrength||.5);if(u.castShadow=!0,u.shadow.camera.near=.1,u.shadow.camera.far=1500,u.position.set(4,5,4),u.lookAt(0,0,0),u.shadow.mapSize=new i.FM8(1024,1024),s.add(u),r.allowLightHellpers){var m=new i.cBI(u,5);s.add(m)}var v=new i.vmT(r.hemLighColor||3381708,4473947,r.hemLightStrength||.1);if(r.allowLightHellpers){var p=new i.Qpg(v,3);s.add(p)}s.add(v);var L=new i.PMe(16777215,r.spotLightStrength||.6);if(L.position.set(0,0,16),s.add(L),r.allowLightHellpers){var f=new i.FvO(L);s.add(f)}var S,k,M=function(e){(new i.dpR).load(e,(function(e){e.magFilter=i.TyD,e.minFilter=i.FDw,e.flipY=!1,64===e.image.width&&64===e.image.height&&k.traverse((function(t){t.isMesh&&(t.material.map=e)}))}))};(new o.E).load(r.skinLocation||"./skin.glb",(function(e){(k=e.scene).traverse((function(e){e.castShadow=!0,"head"===e.name&&(S=e)})),k.position.y=-.5,s.add(k),document.getElementById("userImage").addEventListener("change",(function(e){var t=e.target.files[0],n=URL.createObjectURL(t);M(n)})),window.addEventListener("mousemove",(function(e){if(!(Math.abs(w.getAzimuthalAngle())>(r.joinLimit||.8))){var t=C(e);I(t),c.render(s,l)}})),r.testSkin&&M(r.testSkinURL),h.remove(),H()}),void 0,(function(e){return console.log(e)}));var b=new i._12(1e3,1e3,1e3),P=new i.xoR({color:r.groundColor||15067887}),x=new i.Kj0(b,P);x.rotation.x=-Math.PI/2,x.position.y=-1.5,x.receiveShadow=!0,s.add(x);var C=function(e){return{x:e.clientX/window.innerWidth*2-1,y:-e.clientY/window.innerHeight*2+1}},I=function(e){S.rotation.y=y(2*Math.PI+Math.PI/2*-e.x,6,6.5)+2*Math.PI,S.rotation.x=y(2*Math.PI-Math.PI/2*e.y,6.1,6.4)+Math.PI},y=function(e,t,n){return Math.min(Math.max(e,t),n)};window.addEventListener("resize",(function(){l.aspect=d.clientWidth/d.clientHeight,l.updateProjectionMatrix(),c.render(s,l)}));var z=!1,H=function e(){z||(!z&&l.position.z>4||L.position.z>4?(l.position.z-=F,L.position.z-=F,F+=.01):(z=!0,w.enableZoom=!1,w.ena=!1,w.update())),l.aspect=d.clientWidth/d.clientHeight,l.updateProjectionMatrix(),requestAnimationFrame(e),c.render(s,l)},F=.05}},0,[[28,666,216]]]);